releases:

### CURRENT #######################################################################

- version_major: 3
  version_minor: 17
  version_patch: 1
  version_pre: null
  name: 'Spyri'
  info_url: https://de.wikipedia.org/wiki/Johanna_Spyri
  description: |

    ### API
    - feature: Manage groups via API

    ### ZHdK Integration
    - clean-up: Remove references to InstitutionalGroupsImporter

    ### admin-webapp
    - feat: the 'Ignored keyword keys for browsing' setting can be edited

    ### webapp
    - feat: create user token from external app
    - feat: internationalization
    - fix: styling of explore view

### HISTORY  ######################################################################

- version_major: 3
  version_minor: 16
  version_patch: 0
  version_pre: null
  name: 'Schilter'
  info_url: http://www.sikart.ch/KuenstlerInnen.aspx?id=4001492
  description: |

    ## Changes

    ### deploy
    - Set new http hostnames for HSLU hosts

    ### webapp
    - feature: add person show view
    - feature: merge login and explore page
    - fix: after clicking ok on batch delete all modal show preloader as feedback to prevent user clicking several times
    - fix: change „alle n von stapel entfernen“ to „stapel leeren“ since always all are removed, even if you only show sets or entries
    - fix: reduce maximum selection in box to 36 instead of 50 since the set selection dialog does not work otherweise

- version_major: 3
  version_minor: 15
  version_patch: 0
  version_pre: null
  name: 'Lüthi'
  info_url: http://www.sikart.ch/kuenstlerinnen.aspx?id=4000319
  description: |

    ## Changes

    ### webapp
    - feature: support batch edit for whole sets
    - feature: show all meta data edit in dropdown for mixed resources; only batch edit authorized resources
    - feature: add exporter hint to share modal
    - feature: show modal when saving meta data form
    - feature/fix: add browse in dropdown for media entries; fix order of buttons and actions
    - fix: for meta data edit only use vocabulary meta keys which are enabled for the resource type
    - fix: order by edit_session_updated_at instead of meta_data_updated_at
    - fix: tokens table headers and some text fixes
    - fix: after transfer responsibility show view permissions instead of edit permissions to prevent authorization exception
    - fix: batch update with ajax put method failed because of custom url redirect
    - fix: wording and route naming
    - fix: icons and labels
    - fix: use transfer responsibility permissions rule to make admin mode working; set new rights for responsible user, not for logged in user
    - fix: do not show share button for unpublished entries
    - spec: firefox esr path

    ### API
    - feature: Publish all properties of the meta-key resource
    - feature: Enable basic-auth sign-in via email-address or login

    ### admin-webapp
    - feature: restrict actions of meta keys belonging to madek_core Vocabulary
    - spec: firefox esr path

    ### integration-tests
    - spec: prepare upgrade to Firefox ESR 52

- version_major: 3
  version_minor: 14
  version_patch: 0
  version_pre: null
  name: 'Bass'
  info_url: http://www.sikart.ch/kuenstlerinnen.aspx?id=4023693
  description: |

    ## Changes

    ### webapp
    - feature: browse similar entries ("Stöbern")
    - feature: for permissions filter add api filter; fix wording and order; add count for visibility filters
    - feature: improve dashboard
    - feature: introduce actions dropdown for media entry and collection pages
    - feature: prefill autocomplete for extensible keywords too
    - feature: selection limit modal
    - fix: automatically open of sections for selected filter
    - fix: do not show empty resource actions dropdown; change texts
    - fix: do not show user/group permissions autocomplete in side filter if it is empty
    - fix: sort featured set according to saved sorting
    - fix: text in media entry export dialog
    - fix: texts for entry and set dropdowns

    ### admin-webapp
    - feat: enable extended sorting for Vocabularies, MetaKeys & Keywords
    - ui: show link to Assistant section on dashboard page

- version_major: 3
  version_minor: 13
  version_patch: 1
  version_pre: null
  name: 'Töpffer'
  info_url: https://de.wikipedia.org/wiki/Rodolphe_T%C3%B6pffer
  description: |

    ## Changes

    * Filter by Permissions when searching/filtering
    * "Share" Dialog for Entries

    ### admin
    - feat: context_keys: add move to top/bottom sortings
    - feat: ui: replace huge dropdowns with choosing from listings
    - feat: add snippets to SQL Reports
    - feat: sql snippets: add query to find videos with incomplete previews

    ### API
    - fix: CORS preflights

    ### webapp:
    - feat: explore: catalog can use institutional groups
    - feat: permissions filters
    - feat: share modal and view
    - fix: adjust texts for share modal and fix button order
    - fix: do not show filename search for collection dashboard sections
    - fix: make whole side filter async
    - fix: ui: configured vocab order in 'all data' tab

- version_major: 3
  version_minor: 13
  version_patch: 0
  version_pre: null
  name: 'Töpffer'
  info_url: https://de.wikipedia.org/wiki/Rodolphe_T%C3%B6pffer
  description: |

    ## Changes

    * Add API-Tokens and remove sessions.

    ### webapp
    - feat: ui: icon: add 'checkbox-mixed'
    - feat: User API-Tokens
    - feat: filters for sets and in sets
    - feat: vocabulary permissions and member list for group show
    - fix: Dashboard text
    - fix: show group name as link on resource permissions form if user is group member
    - fix: tri state checkbox for page selection
    - fix: wording and separators on dashboard

- version_major: 3
  version_minor: 12
  version_patch: 0
  version_pre: null
  name: 'YEÄH!'
  info_url: 'https://street.ars.is/people/a0975ba2-cd83-46b2-a361-f87aee9f3629'
  description: |

    ## Changes

    ### Database
    - breaking change: migrate Licenses to Keywords with a 'custom type' ([PR 32](https://github.com/Madek/madek/pull/32))

    ### webapp
    - feat: add content to clipboard in chunks
    - feat: Keyword show page with info resources box
    - feat: (beta) browse "similar entries"
    - feat: store user settings in db
    - feat: allow sorting wherever possible (by title only for set boxes)
    - feat: if entries result is empty use set fallback if only search filter or no filters used
    - feat: ui: MetaDatumText: more readable line length
    - fix: remove drafts from clipboard again
    - fix: adjust draft text messages
    - fix: dashboard: clipboard always in menu, fallback message
    - fix: move default license hack from upload controller to settings
    - fix: remove select all button in box
    - fix: ui: show support tab only when configured
    - fix: add clipboard to user menu
    - fix: add sorting for vocabulary contents and vocabulary term
    - fix: dont show pages selection when logged out
    - fix: enable „remove all from clipboard“ for large sizes
    - fix: only show selection for thumbnails if dropdown menu is shown
    - fix: show meta data for list layout in list mode (one column)
    - fix: ui: LoginMenu: no tabs if only system login
    - perf: presenter: ActivityStream: optimize dump
    - docs: render docs from feature specs

    ### admin-webapp
    - feat: dashboard: system and storage info
    - feat: manage Authentication Groups
    - feat: SQL Reports (alpha, opt-in)
    - feat: filtering people by subtype
    - feat: support default license/usage AppSettings
    - feat: ui: show where meta keys are enabled for on vocabulary#show page
    - feat: ui: layout with wide navbar
    - feat: ui: show admin comments on overview pages
    - feat: ui: forms: use monospace textarea as setting inputs; ui adjustments

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '11.1'
  name: Pulver
  info_url: 'https://de.wikipedia.org/wiki/Liselotte_Pulver'
  description: |

    ## Changes

    ### webapp
    - feat: Confgure AAI sign-in
    - feat: view for vocabulary keyword terms
    - feat: Add signed-in users group; identify ZHdK group by id (and not by name)
    - feat: ui: persist list config in user session
    - feat: configure login providers
    - perf: add and remove collection children using arcs for performance
    - fix: disable actions dropdown for uploader
    - fix: add all text in dropdown should show total count
    - fix: ui: ResourcePermissions: don't add existing subjects
    - fix: login: cleanup routes
    - fix: batch delete hint text

    ### admin-webapp
    - feat: display statistics on dashboard page
    - fix: ui: list user groups as list

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '11.0'
  name: Pulver
  info_url: 'https://de.wikipedia.org/wiki/Liselotte_Pulver'
  description: |

    New Features in webapp:

    Embeds: redesign, support audio and images, add Open Graph protocol

    Workflow enhancements:

    * beta: clipboard collection for batch processing
    * add "batch delete" action
    * enable list view mode in all "resource boxes"

    ## Changes

    ### admin-webapp
    - feat: when moving meta_keys, make a log entry in admin_comment
    - ui/settings: make Support URL setting editable
    - feat: users: list groups an user belongs to, minor ui updates
    - meta_keys: list contexts in which a meta key is used

    ### deploy
    - settings: embeds config
    - Only dump structure_and_data, no more data only

    ### webapp
    - feat: enable list view everywhere; fix usage data relation information
    - feat: dashboard: async section has retry button with fallback link
    - feat: clipboard collection (beta)
    - feat: batch delete resources
    - feat: Embed Player: support audio and images
    - feat: selection per page in resources box
    - feat: ui: enhance MediaEntry embed & preview
    - feat: view: MediaEntry: add Open Graph protocol
    - fix: ActivityStream: handle drafts, dont fetch if empty
    - fix: clipboard: dashboard section, wording
    - fix: previews: video small thumb selection
    - fix: view: CollectionShow: highlights set covers
    - fix: Enable or disable the shibboleth route via a setting
    - fix: ui: VocabularyKeywords: correct label for order
    - fix: ui: don't use Array.prototype.includes
    - fix: controller: sessions: redirect for GET methods

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '10.2'
  name: Miedinger
  info_url: 'https://en.wikipedia.org/wiki/Max_Miedinger'
  description: |

    UX fixes for webapp:

    * VideoPlayer: ensure inital state of HD toggle is displaye correctly
    * Tile View: make caption clickable (fixes problem with very wide images)

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '10.1'
  name: Miedinger
  info_url: 'https://en.wikipedia.org/wiki/Max_Miedinger'
  description: |

    Admin enhancements, a simple HD toggle for the video player and small fixes.

    ## Changes

    ### webapp
    - feat: player: HD toggle
    - fix: app: more secure authentication
    - fix: deprecate License, make them behave like keywords
    - fix: presenters: display of user permissions

    ### admin
    - feat: improve meta key creation/update
    - feat: MetaKeys can be renamed and even moved
    - feat: style: forms for "new" actions have a yellowish background
    - fix: MetaKeys: enhance edit and move forms
    - fix: MetaKeysCreation: auto-correct given id (vocabulary prefix)

    ### deploy
    - reverse-proxy: enable HSTS when using certbot
    - reverse-proxy: avoid duplicate header
    - reverse-proxy: add Forwarded-Proto header

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '10.0'
  name: Miedinger
  info_url: 'https://en.wikipedia.org/wiki/Max_Miedinger'
  description: |

    ## Changes

    ### admin-webapp

    - vocabularies: improve ui
    - fix meta key with People type creation

    ### webapp
    - feat: view: VocabulariesIndex: list MetaKeys
    - feat: view: Vocabulary: Permissions tab
    - feat: view: VocabularyPermissions: group edit button
    - feature: add relation counts to usage data
    - feature: split more_data into more_data and usage_data
    - fix: do not show keyword checkboxes if extensible
    - fix: for transfer responsibility remove existing permissions for new user
    - fix: meta data edit: extareas
    - fix: meta data listing layout and texts
    - fix: never set newly created Sets 'public'
    - fix: only show delete icon on flyout if destroyable instead of editable
    - fix: only show vocab keywords if content available
    - fix: permissions layout and labels
    - fix: show detailed name for institutional groups on permissions form
    - fix: style: allow multine-line tag cloud items
    - fix: style: MediaPlayer: fullscreen background
    - fix: ui: cleanup url params in box links
    - fix: ui: more careful auto-linking for MetaDatumText
    - fix: ui: Vocabulary pages borders
    - perf: memoize `current_user`

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '9.0'
  name: Celtic Frost
  info_url: 'https://de.wikipedia.org/wiki/Celtic_Frost'
  description: |

    Adds functionality to transfer responsibility of Entries and Sets to another user,
    plus many fixes and performace enhancements (especially image-related)

    ## Changes

    ### webapp
    - feat: transfer responsibility
    - fix: view: increase resource box auto-loading
    - fix: view: shuffle teaser and catalog images
    - fix: view: image preview handling
    - fix: view: collection highlights preview display
    - fix: my: ActivityStream: remove 'beta', fallback message
    - fix: keyword/term routes

    ### admin-webapp
    - fix: webapp_keyword_path
    - fix keywords & meta keys ordering
    - fix: compute keyword usage correctly

    ### deploy
    - reverse-proxy: enable letsencrypt cert if present

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '8.0'
  name: Glauser
  info_url: 'https://de.wikipedia.org/wiki/Friedrich_Glauser'
  description: |

    **webapp**

    - several fixes, some security related
    - add custom urls management
    - improved MetaData editing
    - better Vocabulary-related UI

    **admin-webapp**

    - provide UI to cleanup keywords
    - create/duplicate Context from Context/Vocab

    **general**

    - core vocabulary fixes and improvements
    - improved deploy, especially for first-time setup

    ## Changes:

    ### admin-webapp
    - feat: provide keywords management
    - feat: create/duplicate Context from Context/Vocab
    - fix: hide "re-encode missing" features

    ### deploy
    - deploy-info: "deploy time", "is_latest_release"
    - build: add changes since last release
    - fix: apache: add ServerName
    - fix: build: deploy_info: time -> build_time
    - fix: monit: restart instead of reload
    - test: container: run first-time-setup playbook
    - add playbook 'first-time-setup'

    ### webapp
    - fix(security): policy: enforce correct permissions for update permissions
    - fix(security): export: don't serve HTML uploads as HTML
    - feat: add confirmation dialog to custom urls transfer and adjust flash messages
    - feat: custom urls management
    - feat: embed edit meda data by vocabulary inside a tab
    - feat: explore menu entry to vocabularies
    - feat: vocabulary quick links in meta data edit by vocabulary
    - feat: view: release: more deploy info
    - fix: ActivityStream: section name, more formal language
    - fix: disable save button logic
    - fix: meta data edit tests
    - fix: only show extra contexts which have meta data content
    - fix: only show links for vocabulary titles, not for context titles
    - fix: remove filter set saving from dropdown
    - fix: routes: keyword terms, fixes
    - fix: style: MediaPlayer: remove ghostlines
    - fix: vocabulary title links should look the same everywhere

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.5'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    webapp: better Vocabulary Pages and lots of small fixes

    ## Changes:

    ### webapp
    - feat: add vocabulary links to „more data“ view
    - feat: add hint texts to relations page
    - feat: release info: deploy and dev info, all releases
    - feat: vocabulary contents
    - feat: release info page
    - feat: meta data edit thumbnail links to media preview
    - fix: autocomplete dropdown width
    - fix: InputTextDate: fix missing inputs
    - fix: style: consistent font rendering (webkit)
    - fix: routes: fix terms with special characters
    - fix: use larger previews for thumbnail link on meta data edit
    - fix: hint texts for vocabulary keywords and contents
    - fix: relations texts and layouting
    - fix: vocab link color; fix: relations texts and layout

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.4'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    Admin: New audio/video batch re-encoding process.
    Webapp: Better file downloads and PDF viewing fixes;
    customizable HTML (e.g. custom styles or analytics).

    ## Changes:

    ### webapp
    - feat: view: layout: add extra content from settings
    - fix: overwrite content type application/x-pdf with application/pdf
    - fix: use filename with extension for original and preview file downloads

    ### admin
    - media_files: client/server batch encoding process
    - fix: app-settings: hide secrets from deploy-config (Madek/madek_admin-webapp#1)

    ### deploy
    - @zhdk: add HD video previews
    - @zhdk: add piwik tracking code
    - add settings for webapp extra html content

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.3'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    adds media files view mass re-encoding of audio files to the admin ui.

    ## Changes:

    ### admin-webapp
    - feat: view: add deploy config to app_settings#index
    - feat: media files listing with filters, mass re-encoding of audio files

    ### deploy
    - zencoder: set audio codec to mp3
    - @zhdk: update AGW and zencoder config

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.2'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    fixes and performance enhancements

    ## Changes:

    ### webapp
    - feature: add relations pages for media entries (consistent with collections)
    - feat: *beta* add ActivityStream / dashboard timeline
    - fix: set return to for cancel button on meta data batch edit fallback form
    - fix: null title for drafts in fallback meta data edit form
    - fix: ui: VideoPlayer fullscreen styles
    - fix: hacky workaround for buggy ActiveRecord. Sad.

    ### deploy
    - templates/rails.service: start puma in production env
    - inventory: disable shibboleth on test-blank
    - feat: archive-build: add datalayer tree id

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.1'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    hotfix release, fixes Audio Entries

    ## Changes:

    ### webapp
    - hotfix: audio player/audio entry view

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '7.0'
  name: Petitpierre
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4026301'
  description: |

    ## Changes:

    ### webapp
    - feat: batch edit Collection Permissions
    - feat: collection batch meta data edit
    - feat: meta data edit grouping
    - feat: oEmbed API, embedded API, video player
    - feat: sort meta_key keywords if required for meta_key
    - feat: use meta_data_updated_at for sorting by last change
    - feat: view: my: add Vocabularies link to sidebar
    - feat: vocabulary keywords overview
    - fix: fix MetaDatumText inputs (line vs block/textarea)
    - fix: add-to-/remove-from-set dropdown actions
    - fix: do not show actions dropdown on upload page
    - fix: enable links for vocabulary keywords
    - fix: highlights shows duplicates because of concat
    - fix: better hightlight selected collections
    - fix: session: default to persisted cookies, set to 2 weeks (ipad video bug)
    - fix: show all children for edit cover and edit highlights
    - fix: show selection dropdown again for collections
    - fix: ui: add more labels
    - fix: ui: VideoPlayer default sizing
    - fix: view: dashboard: only show Vocabularies link in sidebar
    - perf: boost presenter api / dump speed

    ### api
    - feat: add collection-media-entry-arcs
    - feat: attributes :edit_session_updated_at, :meta_data_updated_at on collection and media_entry
    - feat: Increase the default per page from 10 to 100
    - feat: sort keywords for meta_key if required for meta_key
    - feat: use meta_data_updated_at for sorting by last change
    - fix: permission bug: get_metadata_and_previews was sufficient to download original

    ### admin-webapp
    - fix: adjust edit forms for new MetaKey. text_type

    ### deploy
    - config: zhdk: add setting ui_bundle_context_keys

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '6.0'
  name: Béjart
  info_url: 'https://de.wikipedia.org/wiki/Maurice_Béjart'
  description: |

    ## Changes:

    ### webapp
    - feat: add MetaData Contexts tabs for Sets
    - feat: ui: AutoComplete: "prefill" fixed keywords
    - feat: ui: AutoComplete: style existing values, show pending and empty results
    - feat: backend: add support to sign-in with shibboleth
    - fix: controller: fix resource permissions helper
    - fix: translations: "imports" -> "drafts"

    ### api
    - fix: preview permission is sufficient for getting the media-file resource

    ### admin-webapp
    - feat: Settings: manage Teaser Set & Extra Contexts for Collection View
    - feat: make 'is_extensible_list' available only for MetaDatum::Keywords
    - feat: add Allowed Subtypes for MetaDatum::People form

    ### deploy
    - initial support for shibboleth auth

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '5.0'
  name: Oppenheim
  info_url: 'http://www.sikart.ch/KuenstlerInnen.aspx?id=4000327&lng=de'
  description: |

    First pre-release for "Oppenheim".

    ## Changes:

    ### webapp
    - feat: CollectionRelations: show all
    - feat: CollectionShow: children type switcher
    - feat: display progress of processed files with Zencoder
    - feat: views: Vocabulary info pages
    - feat: sort set by last change
    - fix: MetaDataEdit: don't submit form on enter
    - fix: Explore: larger teaser images
    - fix: PermissionsEdit: fullwidth inputs
    - fix: close set dialog before forward

    ### admin-webapp
    - feat: display progress of processed files with Zencoder

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '4.0'
  name: Tinguely
  info_url: https://de.wikipedia.org/wiki/Jean_Tinguely
  description: |

    Fourth pre-release for Tinguely.

    ## Changes:

    ### General and DB
    - Rework migration: consolidate ZHdK institutional groups
    - Adjust constraints on users table
    - Add login/email constraints on users table; adjust specs
    - Clean up meta and context keys; add related DB constraints
    - migrate meta data groups
    - extract ZencoderRequester as common part

    ### webapp
    - feat: view: app: only show 'my' nav if logged in
    - feat: show edit sessions
    - feat: sorting for set children
    - feat: ui: forms: Input TextDate

    - fix: ui: MetaDatumGroups - MetaDatumPeople
    - fix: translations (minor text fixes)
    - fix: controller: don't check CSRF when accepting usage terms
    - fix: view: Home: welcome message from AppSettings

    ### admin-webapp
    - feat: reencode video with Zencoder
    - fix: after switching to another user redirect to his archive

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: '3.0'
  name: Tinguely
  info_url: https://de.wikipedia.org/wiki/Jean_Tinguely
  description: |

    Third pre-release for Tinguely.

    ## Changes:

    ### General and DB
    - Apply Unicode Normalisation to MetaDatumTexts and Keywords.

    ### webapp
    - feat: "list" view (with MetaData) for Sets
    - feat: "tile" view for all Listings (Entries and Sets)
    - feat: show PDFs in browser (if supported)
    - feat: save layout for sets, show saved layout by default
    - feat: log into edit_sessions
    - fix: don't try to show "Set Highlights" that are hidden for user
    - fix: explore: count for 2nd level & specs
    - fix: routes: add legacy redirects
    - fix: better ranking of autocomplete search results
    - visual fixes

    ### admin-webapp
    - list also not published Media Entries, add corresponding filter

    ### api
    - fix: missing docs for collections & filter_sets
    - fix: meta_key id regex & update docs

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: 'rc.1'
  name: Tinguely
  info_url: https://de.wikipedia.org/wiki/Jean_Tinguely
  description: |
    Second release candidate of the next version of Madek.

    ## Changes:

    * fix: API doc links in the API browser
    * fix: API meta_key id regex check and docs
    * fix: proper counts on explore catalog 2nd level page
    * fix: rewrite HTTP-redirect to HTTPs when using HTTPs
    * fix: MediaPlayer post image
    * fix: validation of new meta data for required context keys
    * feat: use configured site_title as html title
    * feat: set a default license/usage on upload
    * feat: use configured site_title as html title

- version_major: 3
  version_minor: 0
  version_patch: 0
  version_pre: 'rc.0'
  name: Tinguely
  info_url: https://de.wikipedia.org/wiki/Jean_Tinguely
  description: |
    First release candidate of the next version of Madek.
